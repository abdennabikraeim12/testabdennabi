{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/abdennabi/frontend1/src/app/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\"; \n\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { User } from \"@/app/lib/api\";\n\ninterface AuthContextType {\n  user: User | null;\n  isAuthenticated: boolean;\n  login: (user: User) => void;\n  logout: () => void;\n  isLoading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n};\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({\n  children,\n}) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Dans Next.js, utilisez plutÃ´t cookies ou sessionStorage\n    const token = typeof window !== 'undefined' ? localStorage.getItem(\"authToken\") : null;\n    const savedUser = typeof window !== 'undefined' ? localStorage.getItem(\"user\") : null;\n\n    if (token && savedUser) {\n      try {\n        setUser(JSON.parse(savedUser));\n      } catch (error) {\n        if (typeof window !== 'undefined') {\n          localStorage.removeItem(\"authToken\");\n          localStorage.removeItem(\"user\");\n        }\n      }\n    }\n\n    setIsLoading(false);\n  }, []);\n\n  const login = (userData: User) => {\n    setUser(userData);\n    if (typeof window !== 'undefined') {\n      localStorage.setItem(\"user\", JSON.stringify(userData));\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem(\"authToken\");\n      localStorage.removeItem(\"user\");\n    }\n  };\n\n  const value = {\n    user,\n    isAuthenticated: !!user,\n    login,\n    logout,\n    isLoading,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAaA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,MAAM,UAAU;;IACrB,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANa;AAQN,MAAM,eAAwD,CAAC,EACpE,QAAQ,EACT;;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,0DAA0D;YAC1D,MAAM,QAAQ,uCAAgC,aAAa,OAAO,CAAC;YACnE,MAAM,YAAY,uCAAgC,aAAa,OAAO,CAAC;YAEvE,IAAI,SAAS,WAAW;gBACtB,IAAI;oBACF,QAAQ,KAAK,KAAK,CAAC;gBACrB,EAAE,OAAO,OAAO;oBACd,wCAAmC;wBACjC,aAAa,UAAU,CAAC;wBACxB,aAAa,UAAU,CAAC;oBAC1B;gBACF;YACF;YAEA,aAAa;QACf;iCAAG,EAAE;IAEL,MAAM,QAAQ,CAAC;QACb,QAAQ;QACR,wCAAmC;YACjC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC9C;IACF;IAEA,MAAM,SAAS;QACb,QAAQ;QACR,wCAAmC;YACjC,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;QAC1B;IACF;IAEA,MAAM,QAAQ;QACZ;QACA,iBAAiB,CAAC,CAAC;QACnB;QACA;QACA;IACF;IAEA,qBAAO,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;IAjDa;KAAA","debugId":null}}]
}